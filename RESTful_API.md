## 1. REST란 무엇인가?

**REST(Representational State Transfer)** 는 웹과 같은 분산 하이퍼미디어 시스템을 위한 소프트웨어 아키텍처 스타일 중 하나입니다. 간단히 말해, **웹의 기존 기술과 프로토콜(HTTP)을 최대한 활용하여, 클라이언트와 서버 간의 통신을 효율적이고 일관되게 설계하기 위한 일종의 '가이드라인' 또는 '원칙'** 입니다.

이러한 REST 원칙을 충실히 따르는 API를 **RESTful API**라고 부릅니다.

- **Representational (표현):** 데이터 그 자체가 아니라, 해당 데이터의 '표현'을 주고받는다는 의미입니다. 예를 들어, 서버의 사용자 데이터를 클라이언트에 전달할 때, 데이터베이스의 로우(raw) 데이터가 아닌, **JSON**이나 **XML** 같은 형식으로 표현된 데이터를 전달합니다.
- **State Transfer (상태 전송):** 클라이언트의 요청에 따라 서버의 '상태(State)'가 변경되거나, 서버의 리소스 상태가 클라이언트에 '전송'되는 과정을 의미합니다.

---

## 2. RESTful API의 핵심 원칙

REST 아키텍처를 제대로 따르기 위해서는 다음 6가지 핵심 원칙을 지켜야 합니다.

### ① 클라이언트-서버 구조 (Client-Server)

- 클라이언트(UI 담당)와 서버(데이터 및 비즈니스 로직 담당)와 역할이 명확히 분리되어야 합니다.
- 이를 통해 서로의 의존성이 줄어들어, 클라이언트는 UI/UX에, 서버는 데이터 관리에 집중할 수 있게 되어 독립적인 개발과 확장이 가능해집니다. (참고: `3tier.md`)

### ② 무상태성 (Stateless)

- 서버는 클라이언트의 이전 요청 상태를 저장하거나 기억하지 않습니다.
- 각 요청은 그 자체로 완전한 정보를 담고 있어야 합니다. (예: 인증을 위한 토큰, 식별자 등)
- 이를 통해 서버는 클라이언트의 세션 상태에 신경 쓸 필요 없이, 들어오는 요청을 단순하게 처리할 수 있어 확장성(Scalability)이 높아집니다.

### ③ 캐시 가능성 (Cacheable)

- HTTP의 캐싱 기능을 그대로 활용할 수 있어야 합니다.
- 서버는 응답 데이터가 캐시 가능한지 여부를 `Cache-Control` 헤더 등을 통해 명시해야 합니다.
- 클라이언트는 캐시된 데이터를 재사용하여 불필요한 요청을 줄이고, 성능을 향상시킬 수 있습니다.

### ④ 계층화 시스템 (Layered System)

- 클라이언트는 최종 서버에 직접 연결되는지, 중간의 프록시 서버나 로드 밸런서를 거치는지 알 필요가 없습니다.
- 서버 구조를 여러 계층(보안, 캐싱, 로드 밸런싱 등)으로 구성하여 유연성과 확장성을 높일 수 있습니다.

### ⑤ 코드 온디맨드 (Code-On-Demand, 선택 사항)

- 서버가 클라이언트에 실행 가능한 코드(예: JavaScript)를 전송하여, 클라이언트가 그 코드를 실행할 수 있도록 하는 원칙입니다.
- 필수는 아니며, 현대 웹에서는 일반적으로 사용되는 방식입니다.

### ⑥ 균일한 인터페이스 (Uniform Interface) - **가장 중요한 원칙**

REST를 가장 REST답게 만드는 핵심 원칙으로, 아래 4가지 하위 원칙으로 구성됩니다.

#### 가. 리소스 식별 (Identification of Resources)

- 모든 리소스(자원)는 고유한 **URI(Uniform Resource Identifier)**를 통해 식별되어야 합니다.
- URI는 동사(행위)가 아닌, **명사**로 리소스를 표현해야 합니다.

| 좋은 예 (명사 중심)  | 나쁜 예 (동사 중심)      |
| :------------------- | :----------------------- |
| `/users`             | `/getUsers`              |
| `/users/123`         | `/getUserById/123`       |
| `/posts/45/comments` | `/getCommentsForPost/45` |

#### 나. 표현을 통한 리소스 조작 (Manipulation of Resources Through Representations)

- 클라이언트는 리소스의 표현(JSON 등)과 메타데이터를 통해 리소스를 조작할 수 있어야 합니다.
- 리소스에 대한 행위는 **HTTP 메소드(GET, POST, PUT, DELETE 등)** 를 통해 표현합니다.

#### 다. 자기 서술적 메시지 (Self-descriptive Messages)

- 각 메시지(요청/응답)는 그 자체로 완전한 정보를 담고 있어, 메시지를 해석하기 위한 추가 정보가 필요 없어야 합니다.
- 예: 응답 메시지에 `Content-Type: application/json` 헤더를 포함하여 데이터 형식을 명시하고, 상태 코드(200, 404 등)를 통해 결과를 명확히 알려줍니다.

#### 라. HATEOAS (Hypermedia as the Engine of Application State)

- 응답 메시지 안에, 현재 리소스와 관련된 다음 행동을 할 수 있는 **링크(URI)** 를 포함해야 합니다.
- 이를 통해 클라이언트는 API의 구조를 미리 알지 못해도, 응답에 포함된 링크를 통해 다음 상태로 전이할 수 있습니다.

---

## 3. RESTful API 설계: URI와 HTTP 메소드 매핑

RESTful API는 **'리소스(URI로 표현)'** 를 **'어떻게(HTTP 메소드로 표현)'** 할 것인지에 대한 설계입니다. 이는 CRUD 작업과 다음과 같이 매핑됩니다.

| CRUD  | HTTP Method | URI 예시     | 설명                                     |
| :---- | :---------- | :----------- | :--------------------------------------- |
| **C** | `POST`      | `/posts`     | 새로운 게시글을 **생성**합니다.          |
| **R** | `GET`       | `/posts`     | 모든 게시글을 **조회**합니다.            |
| **R** | `GET`       | `/posts/123` | ID가 123인 게시글을 **조회**합니다.      |
| **U** | `PUT`       | `/posts/123` | ID가 123인 게시글을 **전체 수정**합니다. |
| **U** | `PATCH`     | `/posts/123` | ID가 123인 게시글을 **부분 수정**합니다. |
| **D** | `DELETE`    | `/posts/123` | ID가 123인 게시글을 **삭제**합니다.      |

---

## 4. RESTful API 사용 예시: "Todo 리스트"

**상황:** 사용자가 Todo 리스트에 새로운 할 일을 추가하고, 목록을 조회하는 단계

### 단계 1: 새로운 할 일 추가하기 (Create)

1.  **클라이언트 → 서버 (Request)**

    - **HTTP Method:** `POST`
    - **URI:** `/todos`
    - **Headers:** `Content-Type: application/json`
    - **Body (Payload):**
      ```json
      {
        "task": "RESTful API 문서 작성하기",
        "isCompleted": false
      }
      ```

2.  **서버 → 클라이언트 (Response)**
    - **Status Code:** `201 Created` (성공적으로 리소스가 생성됨)
    - **Headers:** `Location: /todos/1` (생성된 리소스의 URI)
    - **Body:**
      ```json
      {
        "id": 1,
        "task": "RESTful API 문서 작성하기",
        "isCompleted": false,
        "createdAt": "2023-10-27T10:00:00Z"
      }
      ```

### 단계 2: 모든 할 일 목록 조회하기 (Read)

1.  **클라이언트 → 서버 (Request)**

    - **HTTP Method:** `GET`
    - **URI:** `/todos`

2.  **서버 → 클라이언트 (Response)**
    - **Status Code:** `200 OK`
    - **Body:**
      ```json
      [
        {
          "id": 1,
          "task": "RESTful API 문서 작성하기",
          "isCompleted": false,
          "createdAt": "2023-10-27T10:00:00Z"
        },
        {
          "id": 2,
          "task": "운동하기",
          "isCompleted": true,
          "createdAt": "2023-10-26T15:30:00Z"
        }
      ]
      ```

---

## 5. 결론

RESTful API는 웹의 기술을 그대로 사용하여, 예측 가능하고 일관된 방식으로 클라이언트와 서버가 통신할 수 있게 해주는 강력한 아키텍처 스타일입니다. URI로 리소스를 정의하고, HTTP 메소드로 행위를 표현하며, 상태가 없는 통신을 지향하는 핵심 원칙들을 이해하고 적용함으로써, 개발자는 확장성 있고 유지보수하기 쉬운 견고한 웹 서비스를 만들 수 있습니다.
